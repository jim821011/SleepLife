(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f06a2d"],{"9e5e":function(t,i,e){},a434:function(t,i,e){"use strict";var s=e("23e7"),a=e("23cb"),n=e("a691"),c=e("50c4"),r=e("7b0b"),o=e("65f0"),l=e("8418"),d=e("1dde"),u=e("ae40"),f=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,v=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,i){var e,s,d,u,f,p,C=r(this),b=c(C.length),x=a(t,b),A=arguments.length;if(0===A?e=s=0:1===A?(e=0,s=b-x):(e=A-2,s=v(h(n(i),0),b-x)),b+e-s>g)throw TypeError(m);for(d=o(C,s),u=0;u<s;u++)f=x+u,f in C&&l(d,u,C[f]);if(d.length=s,e<s){for(u=x;u<b-s;u++)f=u+s,p=u+e,f in C?C[p]=C[f]:delete C[p];for(u=b;u>b-s+e;u--)delete C[u-1]}else if(e>s)for(u=b-s;u>x;u--)f=u+s-1,p=u+e-1,f in C?C[p]=C[f]:delete C[p];for(u=0;u<e;u++)C[u+x]=arguments[u+2];return C.length=b-s+e,d}})},b7cf:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(i){t.isLoading=i}}},[e("div",{staticClass:"loading-animated"},[e("div",{staticClass:"loading-animated-circle"},[e("div"),e("div"),e("div"),e("div"),e("div")])])]),e("header",{staticClass:"container px-0 px-md-3 mt-sm-5"},[""===t.sectionActive?e("div",{staticClass:"bg-cover header-img header-img-1",class:{fadeIn:""===t.sectionActive}}):t._e(),"床墊"===t.sectionActive?e("div",{staticClass:"bg-cover header-img header-img-2",class:{fadeIn:"床墊"===t.sectionActive}}):t._e(),"枕頭"===t.sectionActive?e("div",{staticClass:"bg-cover header-img header-img-3",class:{fadeIn:"枕頭"===t.sectionActive}}):t._e()]),e("section",{staticClass:"container mb-5 mt-md-4 mt-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"mt-4 list"},[e("h5",{staticClass:"bg-primary text-white m-0 py-3 h3 text-center"},[t._v(" 商品列表 ")]),e("div",{staticClass:"production-list bg-white"},[e("div",{staticClass:"list-group font-24 text-center"},[e("a",{staticClass:"list-group-item list-group-item-action",class:{active:""==t.sectionActive},attrs:{href:"#"},on:{click:function(i){i.preventDefault(),t.sectionActive=""}}},[t._v(" 所有寢具 "+t._s("("+t.allProductsNum+")")+" ")]),e("a",{staticClass:"list-group-item list-group-item-action list-group-item-action",class:{active:"床墊"==t.sectionActive},attrs:{href:"#"},on:{click:function(i){i.preventDefault(),t.sectionActive="床墊"}}},[t._v(" 精選床墊 "+t._s(t.listNum("床墊")))]),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:"枕頭"==t.sectionActive},attrs:{href:"#"},on:{click:function(i){i.preventDefault(),t.sectionActive="枕頭"}}},[t._v("舒眠枕頭 "+t._s(t.listNum("枕頭")))])])])])]),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"row"},t._l(t.productFilter,(function(i){return e("div",{key:i.id,staticClass:"col-md-6 col-lg-4"},[e("div",{staticClass:"tool-card mt-4"},[e("router-link",{attrs:{to:{path:"product_detail/"+i.id}}},[e("div",{staticClass:"bg-cover",style:{backgroundImage:"url("+i.imageUrl+")",height:"315px"}},[e("div",{staticClass:"production-img d-flex justify-content-center h-100 align-items-center"},[t._v(" 商品資訊 ")])])]),e("div",{staticClass:"d-flex flex-column text-center text-primary tool-card-item"},[e("span",{staticClass:"h5 py-3 m-0"},[t._v(t._s(i.title))]),e("strong",{staticClass:"h5 pb-3 m-0"},[t._v("NT$ "+t._s(i.price))])]),e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"btn btn-primary btn-lg border-0 w-25",attrs:{href:"#",title:"關注"},on:{click:function(e){return e.preventDefault(),t.setAttention(i)}}},[e("i",{staticClass:"fas fa-star",class:{"text-warning":i.attentionStar}})]),e("a",{staticClass:"btn btn-main-light btn-lg border-0 text-primary w-75 font-weight-bolder",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToCart(i)}}},[t.status.loadingItem===i.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加入購物車")])])],1)])})),0)])])])],1)},a=[],n=(e("99af"),e("4de4"),e("4160"),e("c975"),e("a434"),e("159b"),{data:function(){return{products:[],carts:[],status:{loadingItem:""},allProductsNum:0,sectionActive:"",isLoading:!1,attentionArr:JSON.parse(localStorage.getItem("attention"))||[]}},computed:{productFilter:function(){var t=this;return this.products.forEach((function(i){var e=i;t.attentionArr.forEach((function(t){i.id===t&&(e.attentionStar=!0)}))})),""===this.sectionActive?this.products:this.products.filter((function(i){return i.category===t.sectionActive}))}},created:function(){this.getProduction(),this.getCart(),this.sectionActive=this.$route.params.list||""},methods:{getProduction:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io/","api/").concat("q821011","/products/all");t.isLoading=!0,t.$http.get(i).then((function(i){t.products=i.data.products,t.products.forEach((function(i){t.$set(i,"attentionStar",!1)})),t.allProductsNum=i.data.products.length,t.isLoading=!1}))},setAttention:function(t){var i=this,e=t,s=i.attentionArr.indexOf(t.id);-1===s?(e.attentionStar=!0,i.attentionArr.push(t.id),i.$bus.$emit("message:push","已加入關注","success")):(e.attentionStar=!1,i.attentionArr.splice(s,1),i.$bus.$emit("message:push","已取消關注","danger")),localStorage.setItem("attention",JSON.stringify(this.attentionArr))},getCart:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io/","api/").concat("q821011","/cart");t.$http.get(i).then((function(i){t.carts=i.data.data}))},addToCart:function(t){var i=this,e=0;if(i.carts.carts.forEach((function(i){i.product.id===t.id&&(e+=1)})),e>=1)i.$bus.$emit("message:push","購物車已有相同商品","danger");else{i.status.loadingItem=t.id;var s="".concat("https://vue-course-api.hexschool.io/","api/").concat("q821011","/cart");i.$http.post(s,{data:{product_id:"".concat(t.id),qty:1}}).then((function(){i.getCart(),i.status.loadingItem="",i.$bus.$emit("message:push","成功加入購物車","success")}))}},listNum:function(t){var i=[];return i=this.products.filter((function(i){return i.category===t})),"(".concat(i.length,")")}}}),c=n,r=(e("b99b"),e("2877")),o=Object(r["a"])(c,s,a,!1,null,"4bd57f58",null);i["default"]=o.exports},b99b:function(t,i,e){"use strict";e("9e5e")},c975:function(t,i,e){"use strict";var s=e("23e7"),a=e("4d64").indexOf,n=e("a640"),c=e("ae40"),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),d=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:o||!l||!d},{indexOf:function(t){return o?r.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-37f06a2d.a7e49b14.js.map