(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2089ac"],{a601:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[s("div",{staticClass:"loading-animated"},[s("div",{staticClass:"loading-animated-circle"},[s("div"),s("div"),s("div"),s("div"),s("div")])])]),s("div",{staticClass:"mt-5 mb-5"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-lg-6"},[s("form",{staticClass:"shadow p-4",on:{submit:function(a){return a.preventDefault(),t.payOrder(a)}}},[s("h2",{staticClass:"text-center font-weight-bolder mb-5"},[t._v(" 確認付款 ")]),s("table",{staticClass:"table table-borderless mb-5"},[t._m(0),s("tbody",t._l(t.order.products,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"font-weight-bolder"},[t._v(" "+t._s(a.product.title)+" ")]),s("td",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),s("td",{staticClass:"text-right"},[t._v(" $"+t._s(a.final_total)+" ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v(" 總計 ")]),s("td",{staticClass:"text-right"},[t._v(" $"+t._s(t.order.total)+" ")])])])]),s("table",{staticClass:"table mb-5"},[s("tbody",[s("tr",[s("th",{attrs:{width:"130"}},[t._v(" Email ")]),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",[t._v("姓名")]),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",[t._v("收件人電話")]),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",[t._v("收件人地址")]),s("td",[t._v(t._s(t.order.user.address))])]),s("tr",[s("th",[t._v("付款狀態")]),t.order.is_paid?s("td",{staticClass:"text-success"},[t._v(" 已付款 ")]):s("td",{staticClass:"text-danger"},[t._v(" 尚未付款 ")])])])]),s("div",{staticClass:"text-right"},[t.order.is_paid?s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/production"}},[t._v(" 繼續選購 ")]):s("button",{staticClass:"btn btn-main-light",attrs:{type:"submit"}},[t._v(" 確認付款 ")])],1)])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"payModal",tabindex:"-1",role:"dialog","aria-labelledby":"payModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),s("div",{staticClass:"modal-footer border-0"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 查看明細 ")]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"Index"},"data-dismiss":"modal"}},[t._v(" 回首頁 ")])],1)])])])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"bg-main-light"},[s("tr",[s("th",[t._v(" 品名 ")]),s("th",[t._v(" 數量 ")]),s("th",{staticClass:"text-right"},[t._v(" 總價 ")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header border-0"},[s("h5",{staticClass:"modal-title text-primary font-weight-bolder",attrs:{id:"exampleModalLabel"}},[t._v(" 結帳成功 ")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],r=(s("99af"),s("1157")),d=s.n(r),o={data:function(){return{orderId:"",order:{user:{}},isLoading:!1}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()},methods:{getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("q821011","/order/").concat(t.orderId);t.isLoading=!0,t.$http.get(a).then((function(a){t.order=a.data.order,t.isLoading=!1}))},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("q821011","/pay/").concat(t.orderId);t.isLoading=!0,t.$http.post(a).then((function(a){a.data.success?(t.getOrder(),d()("#payModal").modal("show"),t.isLoading=!1):(t.$bus.$emit("message:push","付款失敗","danger"),t.isLoading=!1)}))}}},n=o,l=s("2877"),c=Object(l["a"])(n,e,i,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d2089ac.0308be93.js.map