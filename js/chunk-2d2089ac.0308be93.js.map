{"version":3,"sources":["webpack:///./src/views/Frontwork/OrderDetail.vue?d4f8","webpack:///src/views/Frontwork/OrderDetail.vue","webpack:///./src/views/Frontwork/OrderDetail.vue?a802","webpack:///./src/views/Frontwork/OrderDetail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","preventDefault","payOrder","_v","_m","_l","order","item","key","id","_s","product","title","qty","unit","final_total","total","user","email","name","tel","address","is_paid","staticRenderFns","data","orderId","created","$route","params","getOrder","methods","vm","$http","get","api","then","res","post","success","$bus","$emit","component"],"mappings":"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","file":"js/chunk-2d2089ac.0308be93.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}},[_c('div',{staticClass:\"loading-animated\"},[_c('div',{staticClass:\"loading-animated-circle\"},[_c('div'),_c('div'),_c('div'),_c('div'),_c('div')])])]),_c('div',{staticClass:\"mt-5 mb-5\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-lg-6\"},[_c('form',{staticClass:\"shadow p-4\",on:{\"submit\":function($event){$event.preventDefault();return _vm.payOrder($event)}}},[_c('h2',{staticClass:\"text-center font-weight-bolder mb-5\"},[_vm._v(\" 確認付款 \")]),_c('table',{staticClass:\"table table-borderless mb-5\"},[_vm._m(0),_c('tbody',_vm._l((_vm.order.products),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"font-weight-bolder\"},[_vm._v(\" \"+_vm._s(item.product.title)+\" \")]),_c('td',[_vm._v(_vm._s(item.qty)+\"/\"+_vm._s(item.product.unit))]),_c('td',{staticClass:\"text-right\"},[_vm._v(\" $\"+_vm._s(item.final_total)+\" \")])])}),0),_c('tfoot',[_c('tr',[_c('td',{staticClass:\"text-right\",attrs:{\"colspan\":\"2\"}},[_vm._v(\" 總計 \")]),_c('td',{staticClass:\"text-right\"},[_vm._v(\" $\"+_vm._s(_vm.order.total)+\" \")])])])]),_c('table',{staticClass:\"table mb-5\"},[_c('tbody',[_c('tr',[_c('th',{attrs:{\"width\":\"130\"}},[_vm._v(\" Email \")]),_c('td',[_vm._v(_vm._s(_vm.order.user.email))])]),_c('tr',[_c('th',[_vm._v(\"姓名\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.name))])]),_c('tr',[_c('th',[_vm._v(\"收件人電話\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.tel))])]),_c('tr',[_c('th',[_vm._v(\"收件人地址\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.address))])]),_c('tr',[_c('th',[_vm._v(\"付款狀態\")]),(!_vm.order.is_paid)?_c('td',{staticClass:\"text-danger\"},[_vm._v(\" 尚未付款 \")]):_c('td',{staticClass:\"text-success\"},[_vm._v(\" 已付款 \")])])])]),_c('div',{staticClass:\"text-right\"},[(!_vm.order.is_paid)?_c('button',{staticClass:\"btn btn-main-light\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 確認付款 \")]):_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":\"/production\"}},[_vm._v(\" 繼續選購 \")])],1)])])])])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"payModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"payModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_vm._m(1),_c('div',{staticClass:\"modal-footer border-0\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\" 查看明細 \")]),_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":{ name: 'Index' },\"data-dismiss\":\"modal\"}},[_vm._v(\" 回首頁 \")])],1)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',{staticClass:\"bg-main-light\"},[_c('tr',[_c('th',[_vm._v(\" 品名 \")]),_c('th',[_vm._v(\" 數量 \")]),_c('th',{staticClass:\"text-right\"},[_vm._v(\" 總價 \")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header border-0\"},[_c('h5',{staticClass:\"modal-title text-primary font-weight-bolder\",attrs:{\"id\":\"exampleModalLabel\"}},[_vm._v(\" 結帳成功 \")]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <loading :active.sync=\"isLoading\">\n      <div class=\"loading-animated\">\n        <div class=\"loading-animated-circle\">\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n        </div>\n      </div>\n    </loading>\n    <div class=\"mt-5 mb-5\">\n      <div class=\"container\">\n        <div class=\"row justify-content-center\">\n          <div class=\"col-lg-6\">\n            <form\n              class=\"shadow p-4\"\n              @submit.prevent=\"payOrder\"\n            >\n              <h2 class=\"text-center font-weight-bolder mb-5\">\n                確認付款\n              </h2>\n\n              <table class=\"table table-borderless mb-5\">\n                <thead class=\"bg-main-light\">\n                  <tr>\n                    <th>\n                      品名\n                    </th>\n                    <th>\n                      數量\n                    </th>\n                    <th\n                      class=\"text-right\"\n                    >\n                      總價\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"item in order.products\"\n                    :key=\"item.id\"\n                  >\n                    <td\n                      class=\"font-weight-bolder\"\n                    >\n                      {{ item.product.title }}\n                    </td>\n                    <td>{{ item.qty }}/{{ item.product.unit }}</td>\n                    <td\n                      class=\"text-right\"\n                    >\n                      ${{ item.final_total }}\n                    </td>\n                  </tr>\n                </tbody>\n                <tfoot>\n                  <tr>\n                    <td\n                      colspan=\"2\"\n                      class=\"text-right\"\n                    >\n                      總計\n                    </td>\n                    <td\n                      class=\"text-right\"\n                    >\n                      ${{ order.total }}\n                    </td>\n                  </tr>\n                </tfoot>\n              </table>\n\n              <table class=\"table mb-5\">\n                <tbody>\n                  <tr>\n                    <th\n                      width=\"130\"\n                    >\n                      Email\n                    </th>\n                    <td>{{ order.user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th>姓名</th>\n                    <td>{{ order.user.name }}</td>\n                  </tr>\n                  <tr>\n                    <th>收件人電話</th>\n                    <td>{{ order.user.tel }}</td>\n                  </tr>\n                  <tr>\n                    <th>收件人地址</th>\n                    <td>{{ order.user.address }}</td>\n                  </tr>\n                  <tr>\n                    <th>付款狀態</th>\n                    <td\n                      v-if=\"!order.is_paid\"\n                      class=\"text-danger\"\n                    >\n                      尚未付款\n                    </td>\n                    <td\n                      v-else\n                      class=\"text-success\"\n                    >\n                      已付款\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n              <div class=\"text-right\">\n                <button\n                  v-if=\"!order.is_paid\"\n                  type=\"submit\"\n                  class=\"btn btn-main-light\"\n                >\n                  確認付款\n                </button>\n                <router-link\n                  v-else\n                  to=\"/production\"\n                  class=\"btn btn-primary\"\n                >\n                  繼續選購\n                </router-link>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Modal -->\n    <div\n      id=\"payModal\"\n      class=\"modal fade\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"payModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div\n        class=\"modal-dialog\"\n        role=\"document\"\n      >\n        <div class=\"modal-content\">\n          <div class=\"modal-header border-0\">\n            <h5\n              id=\"exampleModalLabel\"\n              class=\"modal-title text-primary font-weight-bolder\"\n            >\n              結帳成功\n            </h5>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-footer border-0\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-dismiss=\"modal\"\n            >\n              查看明細\n            </button>\n            <router-link\n              :to=\"{ name: 'Index' }\"\n              class=\"btn btn-primary\"\n              data-dismiss=\"modal\"\n            >\n              回首頁\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery';\n\nexport default {\n  data() {\n    return {\n      orderId: '',\n      order: {\n        user: {},\n      },\n      isLoading: false,\n    };\n  },\n  created() {\n    this.orderId = this.$route.params.orderId;\n    this.getOrder();\n  },\n  methods: {\n    getOrder() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/order/${vm.orderId}`;\n      vm.isLoading = true;\n      vm.$http.get(api).then((res) => {\n        vm.order = res.data.order;\n        vm.isLoading = false;\n      });\n    },\n    payOrder() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/pay/${vm.orderId}`;\n      vm.isLoading = true;\n      vm.$http.post(api).then((res) => {\n        if (res.data.success) {\n          vm.getOrder();\n          $('#payModal').modal('show');\n          vm.isLoading = false;\n        } else {\n          vm.$bus.$emit('message:push', '付款失敗', 'danger');\n          vm.isLoading = false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderDetail.vue?vue&type=template&id=33663ceb&\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}